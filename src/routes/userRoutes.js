import express from 'express';import authMiddleware from '../middleware/authMiddleware.js';import { checkAdminRole } from '../middleware/roleMiddleware.js';import { userValidation } from "../validators/userValidator.js"; // Validator kitaimport { validate } from "../middleware/validate.js";           // Eksekutor validatorimport { uploadImage } from "../middleware/uploadMiddleware.js";export default (userController, adminController) => {    const router = express.Router();    /**     * @route   GET /api/users/me     * @desc    Ambil profil user yang sedang login     */    router.get('/me', authMiddleware, userController.getMyProfile);    /**     * @route   PUT /api/users/me     * @desc    Perbarui profil user yang sedang login     */    router.put(        '/me',        authMiddleware,        uploadImage.single("profilePicture"),        userValidation.updateProfile, // Menggunakan validator yang lebih spesifik        validate,        userController.updateMyProfile    );    /**     * @route   GET /api/users/me/profile-pictures     * @desc    Ambil semua history foto profil user     */    router.get(        '/me/profile-pictures',        authMiddleware,        userController.getProfilePictures    );    /**     * @route   DELETE /api/users/me/profile-pictures/:pictureId     * @desc    Hapus salah satu foto profil dari history     */    router.delete(        '/me/profile-pictures/:pictureId',        authMiddleware,        userValidation.pictureIdParam, // MENAMBAHKAN: Validasi untuk parameter 'pictureId'        validate,        userController.deleteProfilePicture    );    /**     * @route   GET /api/users/all-users     * @desc    Ambil semua user (hanya admin)     */    router.get('/all-users', authMiddleware, checkAdminRole, adminController.getAllUsers);    // CATATAN: Rute '/me/profile-pictures/:pictureId/use' dihapus karena logikanya    // sudah dicakup oleh rute `PUT /me`. Frontend cukup mengirim body:    // { "profilePictureId": "id-foto-lama" } untuk menggunakan foto lama.    // Ini membuat API lebih sederhana dan RESTful.    return router;};